<!DOCTYPE html>
<html>
<head>
<meta charset="EUC-KR">
<title>Insert title here</title>
</head>
<body>
	<h1>corsTest.html</h1>
    <br>
    <button id="btnGetRequest">Get 요청</button>
    <button id="btnPostRequest">Post 요청</button>
    <button id="btnPutRequest">Put 요청</button>
    <button id="btnDeleteRequest">Delete 요청</button>
    
        <script>
        window.onload = function(){
            // 이벤트 핸들러 등록
            document.querySelector("#btnGetRequest").onclick = makeGetRequest;
            document.querySelector("#btnPostRequest").onclick = makePostRequest;
            document.querySelector("#btnPutRequest").onclick = makePutRequest;
            document.querySelector("#btnDeleteRequest").onclick = makeDeleteRequest;
        }
    
        async function makeGetRequest(){
        	let fetchOptions = {
                    method : "GET",
                    credentials : "include",
                }
            try{
                let response = await fetch('http://localhost:8080/cors?param=1',fetchOptions);
                let data = await response.json();
                console.log( data );
            }catch(error){
                console.log(error)
            }
        }
        async function makePostRequest(){
            let urlParams = new URLSearchParams( { param:2 } );
            let fetchOptions = {
                method : "POST",
                credentials : "include",
                body : urlParams
            }
            try{
                let response = await fetch('http://localhost:8080/cors', fetchOptions);
                let data = await response.json();
                console.log( data );
            }catch(error){
                console.log(error)
            }
        }
        async function makePutRequest(){
            let urlParams = new URLSearchParams( { param:3 } );
            let fetchOptions = {
                method : "PUT",
                credentials : "include",
                body : urlParams
            }
            try{
                let response = await fetch('http://localhost:8080/cors/123', fetchOptions);
                let data = await response.json();
                console.log( data );
            }catch(error){
                console.log(error)
            }
        }
        
        async function makeDeleteRequest(){
            let fetchOptions = {
                method : "DELETE",
                credentials : "include",
            }
            try{
                let response = await fetch('http://localhost:8080/cors/123', fetchOptions);
                let data = await response.json();
                console.log( data );
            }catch(error){
                console.log(error)
            }
        }
    </script> 
</body>
</html>